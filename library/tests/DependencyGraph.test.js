import DependencyGraph from '../model/DependencyGraph.js';
describe('DependencyGraph', function () {
    describe('constructor', function () {
        it('should construct a dependency graph', function () {
            let dg = new DependencyGraph();
            chai.expect(dg.size()).to.equal(0);
        });
    });
    describe('DependencyGraph.add', function () {
        it('should add a node into the dependency graph', function () {
            let dg = new DependencyGraph();
            dg.add('a');
            chai.expect(dg.size()).to.equal(1);
            chai.expect(dg.contains('a')).to.equal(true);
        });
        it('should add multiple nodes into the dependency graph', function () {
            let dg = new DependencyGraph();
            dg.add('a');
            dg.add('b');
            dg.add('c');
            chai.expect(dg.size()).to.equal(3);
            chai.expect(dg.contains('a')).to.equal(true);
            chai.expect(dg.contains('b')).to.equal(true);
            chai.expect(dg.contains('c')).to.equal(true);
        });
        it('should do nothing if an identical node has already been added.', function () {
            let dg = new DependencyGraph();
            dg.add('a');
            dg.add('a');
            chai.expect(dg.size()).to.equal(1);
        });
    });
    describe('DependencyGraph.remove', function () {
        it('should remove a node from the graph', function () {
            let dg = new DependencyGraph();
            dg.add('a');
            dg.remove('a');
            chai.expect(dg.size()).to.equal(0);
            chai.expect(dg.contains('a')).to.equal(false);
        });
    });
    describe('DependencyGraph.addDependency', function () {
        it('should add a dependency to the graph', function () {
            let dg = new DependencyGraph();
            dg.add('a');
            dg.add('b');
            dg.addDependency('a', 'b');
            chai.expect(dg.hasDependents('a')).to.equal(true);
            chai.expect(Array.from(dg.getDependents('a'))).to.deep.equal(['b']);
        });
        it('should add a dependency to the graph even if the nodes do not exist', function () {
            let dg = new DependencyGraph();
            dg.addDependency('a', 'b');
            chai.expect(dg.hasDependents('a')).to.equal(true);
            chai.expect(Array.from(dg.getDependents('a'))).to.deep.equal(['b']);
        });
    });
    describe('DependencyGraph.getDependents', function () {
        it('should return an empty iterable for no dependents', function () {
            let dg = new DependencyGraph();
            chai.expect(Array.from(dg.getDependents('a'))).to.deep.equal([]);
        });
        it('should throw a circular dependency exception', function () {
            let dg = new DependencyGraph();
            chai.expect(() => { dg.addDependency('a', 'a'); }).to.throw(Error, "circular dependency");
        });
        it('should throw a circular dependency exception', function () {
            let dg = new DependencyGraph();
            dg.addDependency('a', 'b');
            chai.expect(() => { dg.addDependency('b', 'a'); }).to.throw(Error, "circular dependency");
        });
        it('should throw a circular dependency exception', function () {
            let dg = new DependencyGraph();
            dg.addDependency('a', 'b');
            dg.addDependency('b', 'c');
            chai.expect(() => { dg.addDependency('c', 'a'); }).to.throw(Error, "circular dependency");
        });
        it('should return children dependents', function () {
            let dg = new DependencyGraph();
            dg.addDependency('a', 'b');
            dg.addDependency('b', 'c');
            chai.expect(dg.hasDependents('a')).to.equal(true);
            chai.expect(dg.hasDependents('b')).to.equal(true);
            chai.expect(Array.from(dg.getDependents('a'))).to.deep.equal(['b', 'c']);
        });
        it('should return children dependents', function () {
            let dg = new DependencyGraph();
            dg.addDependency('a', 'b');
            dg.addDependency('a', 'c');
            dg.addDependency('a', 'd');
            dg.addDependency('b', 'c');
            dg.addDependency('b', 'd');
            dg.addDependency('c', 'd');
            chai.expect(dg.hasDependents('a')).to.equal(true);
            chai.expect(dg.hasDependents('b')).to.equal(true);
            chai.expect(dg.hasDependents('c')).to.equal(true);
            chai.expect(dg.hasDependents('d')).to.equal(false);
            chai.expect(Array.from(dg.getDependents('a'))).to.deep.equal(['b', 'c', 'd']);
            chai.expect(Array.from(dg.getDependents('b'))).to.deep.equal(['c', 'd']);
            chai.expect(Array.from(dg.getDependents('c'))).to.deep.equal(['d']);
        });
        it('should return dependents in topological ordering', function () {
            let dg = new DependencyGraph();
            dg.addDependency('a', 'b');
            dg.addDependency('a', 'c');
            dg.addDependency('b', 'd');
            dg.addDependency('c', 'd');
            chai.expect(Array.from(dg.getDependents('a'))).to.deep.equal(['c', 'b', 'd']);
        });
        it('should return dependents in topological ordering', function () {
            let dg = new DependencyGraph();
            dg.addDependency('a', 'b');
            dg.addDependency('a', 'c');
            dg.addDependency('c', 'd');
            dg.addDependency('d', 'b');
            chai.expect(Array.from(dg.getDependents('a'))).to.deep.equal(['c', 'd', 'b']);
        });
        it('should return dependents in topological ordering', function () {
            let dg = new DependencyGraph();
            dg.addDependency('d', 'c');
            dg.addDependency('d', 'b');
            dg.addDependency('d', 'a');
            dg.addDependency('c', 'b');
            dg.addDependency('c', 'a');
            dg.addDependency('b', 'a');
            chai.expect(Array.from(dg.getDependents('d'))).to.deep.equal(['c', 'b', 'a']);
        });
    });
    describe('DependencyGraph.toString', function () {
        it('should print out a simple dependency graph', function () {
            let dg = new DependencyGraph();
            dg.add('a');
            dg.add('b');
            dg.addDependency('a', 'b');
            chai.expect(dg.toString()).to.equal('a->b\n');
        });
        it('should print out a more complicated dependency graph', function () {
            let dg = new DependencyGraph();
            dg.add('a');
            dg.add('b');
            dg.add('c');
            dg.addDependency('a', 'b');
            dg.addDependency('b', 'c');
            dg.addDependency('a', 'c');
            chai.expect(dg.toString()).to.equal('a->b\na->c\nb->c\n');
        });
    });
    describe('DependenyGraph.Generate', function () {
        it('should be able to create a graph from a string', function () {
            // Create a graph
            let dg = new DependencyGraph();
            dg.add('a');
            dg.add('b');
            dg.addDependency('a', 'b');
            // Call the generate method and check the generated graph
            let generated = DependencyGraph.Generate(dg.toString());
            chai.expect(generated.contains('a')).to.equal(true);
            chai.expect(generated.contains('b')).to.equal(true);
            chai.expect(generated.hasDependents('a')).to.equal(true);
            chai.expect(Array.from(dg.getDependents('a'))).to.deep.equal(['b']);
        });
        it('should be able to create a graph from a string', function () {
            // Create a graph
            let dg = new DependencyGraph();
            dg.add('a');
            dg.add('b');
            dg.add('c');
            dg.addDependency('a', 'b');
            dg.addDependency('a', 'c');
            // Call the generate method and check the generated graph
            let generated = DependencyGraph.Generate(dg.toString());
            chai.expect(generated.contains('a')).to.equal(true);
            chai.expect(generated.contains('b')).to.equal(true);
            chai.expect(generated.contains('c')).to.equal(true);
            chai.expect(generated.hasDependents('a')).to.equal(true);
            chai.expect(Array.from(dg.getDependents('a'))).to.include('b');
            chai.expect(Array.from(dg.getDependents('a'))).to.include('c');
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVwZW5kZW5jeUdyYXBoLnRlc3QuanMiLCJzb3VyY2VSb290IjoiLi9zb3VyY2UvIiwic291cmNlcyI6WyJ0ZXN0cy9EZXBlbmRlbmN5R3JhcGgudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLGVBQWUsTUFBTyw2QkFBNkIsQ0FBQztBQUUzRCxRQUFRLENBQUMsaUJBQWlCLEVBQUU7SUFFM0IsUUFBUSxDQUFDLGFBQWEsRUFBRTtRQUV0QixFQUFFLENBQUMscUNBQXFDLEVBQUU7WUFFeEMsSUFBSSxFQUFFLEdBQUcsSUFBSSxlQUFlLEVBQUUsQ0FBQztZQUMvQixJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxxQkFBcUIsRUFBRTtRQUU5QixFQUFFLENBQUMsNkNBQTZDLEVBQUU7WUFDaEQsSUFBSSxFQUFFLEdBQUcsSUFBSSxlQUFlLEVBQUUsQ0FBQztZQUMvQixFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ1osSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDLENBQUM7UUFFSixFQUFFLENBQUMscURBQXFELEVBQUU7WUFFeEQsSUFBSSxFQUFFLEdBQUcsSUFBSSxlQUFlLEVBQUUsQ0FBQztZQUMvQixFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ1osRUFBRSxDQUFDLEdB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QUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMzRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRTtZQUN0QyxJQUFJLEVBQUUsR0FBRyxJQUFJLGVBQWUsRUFBRSxDQUFDO1lBQy9CLEVBQUUsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzFCLEVBQUUsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzFCLEVBQUUsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzFCLEVBQUUsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzFCLEVBQUUsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzFCLEVBQUUsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzFCLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsRCxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2xELElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFbkQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzlFLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3pFLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsa0RBQWtELEVBQUU7WUFDckQsSUFBSSxFQUFFLEdBQUcsSUFBSSxlQUFlLEVBQUUsQ0FBQztZQUMvQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUUxQixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFFaEYsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsa0RBQWtELEVBQUU7WUFDckQsSUFBSSxFQUFFLEdBQUcsSUFBSSxlQUFlLEVBQUUsQ0FBQztZQUMvQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDaEYsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsa0RBQWtELEVBQUU7WUFDckQsSUFBSSxFQUFFLEdBQUcsSUFBSSxlQUFlLEVBQUUsQ0FBQztZQUMvQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBQyxHQUFHLENB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Q0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQy9ELElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hFLENBQUMsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDLENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEZXBlbmRlbmN5R3JhcGggIGZyb20gJy4uL21vZGVsL0RlcGVuZGVuY3lHcmFwaC5qcyc7XG5cbmRlc2NyaWJlKCdEZXBlbmRlbmN5R3JhcGgnLCBmdW5jdGlvbiAoKSB7XG5cblx0ZGVzY3JpYmUoJ2NvbnN0cnVjdG9yJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRpdCgnc2hvdWxkIGNvbnN0cnVjdCBhIGRlcGVuZGVuY3kgZ3JhcGgnLCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRsZXQgZGcgPSBuZXcgRGVwZW5kZW5jeUdyYXBoKCk7XG5cdFx0XHRcdFx0Y2hhaS5leHBlY3QoZGcuc2l6ZSgpKS50by5lcXVhbCgwKTtcblx0XHRcdH0pO1xuXHR9KTtcblxuXHRkZXNjcmliZSgnRGVwZW5kZW5jeUdyYXBoLmFkZCcsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0aXQoJ3Nob3VsZCBhZGQgYSBub2RlIGludG8gdGhlIGRlcGVuZGVuY3kgZ3JhcGgnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0bGV0IGRnID0gbmV3IERlcGVuZGVuY3lHcmFwaCgpO1xuXHRcdFx0XHRcdGRnLmFkZCgnYScpO1xuXHRcdFx0XHRcdGNoYWkuZXhwZWN0KGRnLnNpemUoKSkudG8uZXF1YWwoMSk7XG5cdFx0XHRcdFx0Y2hhaS5leHBlY3QoZGcuY29udGFpbnMoJ2EnKSkudG8uZXF1YWwodHJ1ZSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRpdCgnc2hvdWxkIGFkZCBtdWx0aXBsZSBub2RlcyBpbnRvIHRoZSBkZXBlbmRlbmN5IGdyYXBoJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0bGV0IGRnID0gbmV3IERlcGVuZGVuY3lHcmFwaCgpO1xuXHRcdFx0XHRcdGRnLmFkZCgnYScpO1xuXHRcdFx0XHRcdGRnLmFkZCgnYicpO1xuXHRcdFx0XHRcdGRnLmFkZCgnYycpO1xuXHRcdFx0XHRcdGNoYWkuZXhwZWN0KGRnLnNpemUoKSkudG8uZXF1YWwoMyk7XG5cdFx0XHRcdFx0Y2hhaS5leHBlY3QoZGcuY29udGFpbnMoJ2EnKSkudG8uZXF1YWwodHJ1ZSk7XG5cdFx0XHRcdFx0Y2hhaS5leHBlY3QoZGcuY29udGFpbnMoJ2InKSkudG8uZXF1YWwodHJ1ZSk7XG5cdFx0XHRcdFx0Y2hhaS5leHBlY3QoZGcuY29udGFpbnMoJ2MnKSkudG8uZXF1YWwodHJ1ZSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0aXQoJ3Nob3VsZCBkbyBub3RoaW5nIGlmIGFuIGlkZW50aWNhbCBub2RlIGhhcyBhbHJlYWR5IGJlZW4gYWRkZWQuJywgZnVuY3Rpb24oKVxuXHRcdFx0e1xuXHRcdFx0XHRcdGxldCBkZyA9IG5ldyBEZXBlbmRlbmN5R3JhcGgoKTtcblx0XHRcdFx0XHRkZy5hZGQoJ2EnKTtcblx0XHRcdFx0XHRkZy5hZGQoJ2EnKTtcblx0XHRcdFx0XHRjaGFpLmV4cGVjdChkZy5zaXplKCkpLnRvLmVxdWFsKDEpO1xuXHRcdFx0fSk7XG5cdH0pO1xuXG5cdGRlc2NyaWJlKCdEZXBlbmRlbmN5R3JhcGgucmVtb3ZlJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRpdCgnc2hvdWxkIHJlbW92ZSBhIG5vZGUgZnJvbSB0aGUgZ3JhcGgnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0bGV0IGRnID0gbmV3IERlcGVuZGVuY3lHcmFwaCgpO1xuXHRcdFx0XHRcdGRnLmFkZCgnYScpO1xuXHRcdFx0XHRcdGRnLnJlbW92ZSgnYScpO1xuXHRcdFx0XHRcdGNoYWkuZXhwZWN0KGRnLnNpemUoKSkudG8uZXF1YWwoMCk7XG5cdFx0XHRcdFx0Y2hhaS5leHBlY3QoZGcuY29udGFpbnMoJ2EnKSkudG8uZXF1YWwoZmFsc2UpO1xuXHRcdFx0fSk7XG5cdH0pO1xuXG5cdGRlc2NyaWJlKCdEZXBlbmRlbmN5R3JhcGguYWRkRGVwZW5kZW5jeScsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0aXQoJ3Nob3VsZCBhZGQgYSBkZXBlbmRlbmN5IHRvIHRoZSBncmFwaCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRsZXQgZGcgPSBuZXcgRGVwZW5kZW5jeUdyYXBoKCk7XG5cdFx0XHRcdFx0ZGcuYWRkKCdhJyk7XG5cdFx0XHRcdFx0ZGcuYWRkKCdiJyk7XG5cdFx0XHRcdFx0ZGcuYWRkRGVwZW5kZW5jeSgnYScsJ2InKTtcblx0XHRcdFx0XHRjaGFpLmV4cGVjdChkZy5oYXNEZXBlbmRlbnRzKCdhJykpLnRvLmVxdWFsKHRydWUpO1xuXHRcdFx0XHRcdGNoYWkuZXhwZWN0KEFycmF5LmZyb20oZGcuZ2V0RGVwZW5kZW50cygnYScpKSkudG8uZGVlcC5lcXVhbChbJ2InXSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0aXQoJ3Nob3VsZCBhZGQgYSBkZXBlbmRlbmN5IHRvIHRoZSBncmFwaCBldmVuIGlmIHRoZSBub2RlcyBkbyBub3QgZXhpc3QnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0bGV0IGRnID0gbmV3IERlcGVuZGVuY3lHcmFwaCgpO1xuXHRcdFx0XHRcdGRnLmFkZERlcGVuZGVuY3koJ2EnLCdiJyk7XG5cdFx0XHRcdFx0Y2hhaS5leHBlY3QoZGcuaGFzRGVwZW5kZW50cygnYScpKS50by5lcXVhbCh0cnVlKTtcblx0XHRcdFx0XHRjaGFpLmV4cGVjdChBcnJheS5mcm9tKGRnLmdldERlcGVuZGVudHMoJ2EnKSkpLnRvLmRlZXAuZXF1YWwoWydiJ10pO1xuXHRcdFx0fSk7XG5cdH0pO1xuXG5cdGRlc2NyaWJlKCdEZXBlbmRlbmN5R3JhcGguZ2V0RGVwZW5kZW50cycsIGZ1bmN0aW9uICgpIHtcblxuXHRcdGl0KCdzaG91bGQgcmV0dXJuIGFuIGVtcHR5IGl0ZXJhYmxlIGZvciBubyBkZXBlbmRlbnRzJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRsZXQgZGcgPSBuZXcgRGVwZW5kZW5jeUdyYXBoPHN0cmluZz4oKTtcblx0XHRcdFx0Y2hhaS5leHBlY3QoQXJyYXkuZnJvbShkZy5nZXREZXBlbmRlbnRzKCdhJykpKS50by5kZWVwLmVxdWFsKFtdKTtcblx0XHR9KTtcblxuXHRcdGl0KCdzaG91bGQgdGhyb3cgYSBjaXJjdWxhciBkZXBlbmRlbmN5IGV4Y2VwdGlvbicsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0bGV0IGRnID0gbmV3IERlcGVuZGVuY3lHcmFwaCgpO1xuXHRcdFx0XHRjaGFpLmV4cGVjdCgoKT0+e2RnLmFkZERlcGVuZGVuY3koJ2EnLCdhJyl9KS50by50aHJvdyhFcnJvciwgXCJjaXJjdWxhciBkZXBlbmRlbmN5XCIpO1xuXHRcdH0pO1xuXG5cdFx0aXQoJ3Nob3VsZCB0aHJvdyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgZXhjZXB0aW9uJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRsZXQgZGcgPSBuZXcgRGVwZW5kZW5jeUdyYXBoKCk7XG5cdFx0XHRcdGRnLmFkZERlcGVuZGVuY3koJ2EnLCdiJyk7XG5cdFx0XHRcdGNoYWkuZXhwZWN0KCgpPT57ZGcuYWRkRGVwZW5kZW5jeSgnYicsJ2EnKX0pLnRvLnRocm93KEVycm9yLCBcImNpcmN1bGFyIGRlcGVuZGVuY3lcIik7XG5cdFx0fSk7XG5cblx0XHRpdCgnc2hvdWxkIHRocm93IGEgY2lyY3VsYXIgZGVwZW5kZW5jeSBleGNlcHRpb24nLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGxldCBkZyA9IG5ldyBEZXBlbmRlbmN5R3JhcGgoKTtcblx0XHRcdFx0ZGcuYWRkRGVwZW5kZW5jeSgnYScsJ2InKTtcblx0XHRcdFx0ZGcuYWRkRGVwZW5kZW5jeSgnYicsJ2MnKTtcblx0XHRcdFx0Y2hhaS5leHBlY3QoKCk9PntkZy5hZGREZXBlbmRlbmN5KCdjJywnYScpfSkudG8udGhyb3coRXJyb3IsIFwiY2lyY3VsYXIgZGVwZW5kZW5jeVwiKTtcblx0XHR9KTtcblxuXHRcdGl0KCdzaG91bGQgcmV0dXJuIGNoaWxkcmVuIGRlcGVuZGVudHMnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGxldCBkZyA9IG5ldyBEZXBlbmRlbmN5R3JhcGgoKTtcblx0XHRcdFx0ZGcuYWRkRGVwZW5kZW5jeSgnYScsJ2InKTtcblx0XHRcdFx0ZGcuYWRkRGVwZW5kZW5jeSgnYicsJ2MnKTtcblx0XHRcdFx0Y2hhaS5leHBlY3QoZGcuaGFzRGVwZW5kZW50cygnYScpKS50by5lcXVhbCh0cnVlKTtcblx0XHRcdFx0Y2hhaS5leHBlY3QoZGcuaGFzRGVwZW5kZW50cygnYicpKS50by5lcXVhbCh0cnVlKTtcblx0XHRcdFx0Y2hhaS5leHBlY3QoQXJyYXkuZnJvbShkZy5nZXREZXBlbmRlbnRzKCdhJykpKS50by5kZWVwLmVxdWFsKFsnYicsICdjJ10pO1xuXHRcdH0pO1xuXG5cdFx0aXQoJ3Nob3VsZCByZXR1cm4gY2hpbGRyZW4gZGVwZW5kZW50cycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0bGV0IGRnID0gbmV3IERlcGVuZGVuY3lHcmFwaCgpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdhJywnYicpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdhJywnYycpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdhJywnZCcpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdiJywnYycpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdiJywnZCcpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdjJywnZCcpO1xuXHRcdFx0XHRjaGFpLmV4cGVjdChkZy5oYXNEZXBlbmRlbnRzKCdhJykpLnRvLmVxdWFsKHRydWUpO1xuXHRcdFx0XHRjaGFpLmV4cGVjdChkZy5oYXNEZXBlbmRlbnRzKCdiJykpLnRvLmVxdWFsKHRydWUpO1xuXHRcdFx0XHRjaGFpLmV4cGVjdChkZy5oYXNEZXBlbmRlbnRzKCdjJykpLnRvLmVxdWFsKHRydWUpO1xuXHRcdFx0XHRjaGFpLmV4cGVjdChkZy5oYXNEZXBlbmRlbnRzKCdkJykpLnRvLmVxdWFsKGZhbHNlKTtcblxuXHRcdFx0XHRjaGFpLmV4cGVjdChBcnJheS5mcm9tKGRnLmdldERlcGVuZGVudHMoJ2EnKSkpLnRvLmRlZXAuZXF1YWwoWydiJywgJ2MnLCAnZCddKTtcblx0XHRcdFx0Y2hhaS5leHBlY3QoQXJyYXkuZnJvbShkZy5nZXREZXBlbmRlbnRzKCdiJykpKS50by5kZWVwLmVxdWFsKFsnYycsICdkJ10pO1xuXHRcdFx0XHRjaGFpLmV4cGVjdChBcnJheS5mcm9tKGRnLmdldERlcGVuZGVudHMoJ2MnKSkpLnRvLmRlZXAuZXF1YWwoWydkJ10pO1xuXHRcdH0pO1xuXG5cdFx0aXQoJ3Nob3VsZCByZXR1cm4gZGVwZW5kZW50cyBpbiB0b3BvbG9naWNhbCBvcmRlcmluZycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0bGV0IGRnID0gbmV3IERlcGVuZGVuY3lHcmFwaCgpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdhJywnYicpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdhJywnYycpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdiJywnZCcpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdjJywnZCcpO1xuXG5cdFx0XHRcdGNoYWkuZXhwZWN0KEFycmF5LmZyb20oZGcuZ2V0RGVwZW5kZW50cygnYScpKSkudG8uZGVlcC5lcXVhbChbJ2MnLCAnYicsICdkJ10pO1xuXG5cdFx0fSk7XG5cblx0XHRpdCgnc2hvdWxkIHJldHVybiBkZXBlbmRlbnRzIGluIHRvcG9sb2dpY2FsIG9yZGVyaW5nJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRsZXQgZGcgPSBuZXcgRGVwZW5kZW5jeUdyYXBoKCk7XG5cdFx0XHRcdGRnLmFkZERlcGVuZGVuY3koJ2EnLCdiJyk7XG5cdFx0XHRcdGRnLmFkZERlcGVuZGVuY3koJ2EnLCdjJyk7XG5cdFx0XHRcdGRnLmFkZERlcGVuZGVuY3koJ2MnLCdkJyk7XG5cdFx0XHRcdGRnLmFkZERlcGVuZGVuY3koJ2QnLCdiJyk7XG5cdFx0XHRcdGNoYWkuZXhwZWN0KEFycmF5LmZyb20oZGcuZ2V0RGVwZW5kZW50cygnYScpKSkudG8uZGVlcC5lcXVhbChbJ2MnLCAnZCcsICdiJ10pO1xuXHRcdH0pO1xuXG5cdFx0aXQoJ3Nob3VsZCByZXR1cm4gZGVwZW5kZW50cyBpbiB0b3BvbG9naWNhbCBvcmRlcmluZycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0bGV0IGRnID0gbmV3IERlcGVuZGVuY3lHcmFwaCgpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdkJywnYycpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdkJywnYicpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdkJywnYScpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdjJywnYicpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdjJywnYScpO1xuXHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdiJywnYScpO1xuXHRcdFx0XHRjaGFpLmV4cGVjdChBcnJheS5mcm9tKGRnLmdldERlcGVuZGVudHMoJ2QnKSkpLnRvLmRlZXAuZXF1YWwoWydjJywgJ2InLCAnYSddKTtcblx0XHR9KTtcblx0fSk7XG5cblx0ZGVzY3JpYmUoJ0RlcGVuZGVuY3lHcmFwaC50b1N0cmluZycsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0aXQoJ3Nob3VsZCBwcmludCBvdXQgYSBzaW1wbGUgZGVwZW5kZW5jeSBncmFwaCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRsZXQgZGcgPSBuZXcgRGVwZW5kZW5jeUdyYXBoKCk7XG5cdFx0XHRcdFx0ZGcuYWRkKCdhJyk7XG5cdFx0XHRcdFx0ZGcuYWRkKCdiJyk7XG5cdFx0XHRcdFx0ZGcuYWRkRGVwZW5kZW5jeSgnYScsJ2InKTtcblx0XHRcdFx0XHRjaGFpLmV4cGVjdChkZy50b1N0cmluZygpKS50by5lcXVhbCgnYS0+YlxcbicpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGl0KCdzaG91bGQgcHJpbnQgb3V0IGEgbW9yZSBjb21wbGljYXRlZCBkZXBlbmRlbmN5IGdyYXBoJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGxldCBkZyA9IG5ldyBEZXBlbmRlbmN5R3JhcGgoKTtcblx0XHRcdFx0XHRkZy5hZGQoJ2EnKTtcblx0XHRcdFx0XHRkZy5hZGQoJ2InKTtcblx0XHRcdFx0XHRkZy5hZGQoJ2MnKTtcblx0XHRcdFx0XHRkZy5hZGREZXBlbmRlbmN5KCdhJywnYicpO1xuXHRcdFx0XHRcdGRnLmFkZERlcGVuZGVuY3koJ2InLCdjJyk7XG5cdFx0XHRcdFx0ZGcuYWRkRGVwZW5kZW5jeSgnYScsJ2MnKTtcblx0XHRcdFx0XHRjaGFpLmV4cGVjdChkZy50b1N0cmluZygpKS50by5lcXVhbCgnYS0+YlxcbmEtPmNcXG5iLT5jXFxuJyk7XG5cdFx0XHR9KTtcblx0fSk7XG5cblx0ZGVzY3JpYmUoJ0RlcGVuZGVueUdyYXBoLkdlbmVyYXRlJywgZnVuY3Rpb24oKSB7XG5cblx0XHRpdCgnc2hvdWxkIGJlIGFibGUgdG8gY3JlYXRlIGEgZ3JhcGggZnJvbSBhIHN0cmluZycsIGZ1bmN0aW9uKCl7XG5cblx0XHRcdC8vIENyZWF0ZSBhIGdyYXBoXG5cdFx0XHRsZXQgZGcgPSBuZXcgRGVwZW5kZW5jeUdyYXBoKCk7XG5cdFx0XHRkZy5hZGQoJ2EnKTtcblx0XHRcdGRnLmFkZCgnYicpO1xuXHRcdFx0ZGcuYWRkRGVwZW5kZW5jeSgnYScsJ2InKTtcblxuXHRcdFx0Ly8gQ2FsbCB0aGUgZ2VuZXJhdGUgbWV0aG9kIGFuZCBjaGVjayB0aGUgZ2VuZXJhdGVkIGdyYXBoXG5cdFx0XHRsZXQgZ2VuZXJhdGVkID0gRGVwZW5kZW5jeUdyYXBoLkdlbmVyYXRlKGRnLnRvU3RyaW5nKCkpO1xuXHRcdFx0Y2hhaS5leHBlY3QoZ2VuZXJhdGVkLmNvbnRhaW5zKCdhJykpLnRvLmVxdWFsKHRydWUpO1xuXHRcdFx0Y2hhaS5leHBlY3QoZ2VuZXJhdGVkLmNvbnRhaW5zKCdiJykpLnRvLmVxdWFsKHRydWUpO1xuXHRcdFx0Y2hhaS5leHBlY3QoZ2VuZXJhdGVkLmhhc0RlcGVuZGVudHMoJ2EnKSkudG8uZXF1YWwodHJ1ZSk7XG5cdFx0XHRjaGFpLmV4cGVjdChBcnJheS5mcm9tKGRnLmdldERlcGVuZGVudHMoJ2EnKSkpLnRvLmRlZXAuZXF1YWwoWydiJ10pO1xuXHRcdH0pO1xuXG5cdFx0aXQoJ3Nob3VsZCBiZSBhYmxlIHRvIGNyZWF0ZSBhIGdyYXBoIGZyb20gYSBzdHJpbmcnLCBmdW5jdGlvbigpe1xuXG5cdFx0XHQvLyBDcmVhdGUgYSBncmFwaFxuXHRcdFx0bGV0IGRnID0gbmV3IERlcGVuZGVuY3lHcmFwaCgpO1xuXHRcdFx0ZGcuYWRkKCdhJyk7XG5cdFx0XHRkZy5hZGQoJ2InKTtcblx0XHRcdGRnLmFkZCgnYycpO1xuXHRcdFx0ZGcuYWRkRGVwZW5kZW5jeSgnYScsJ2InKTtcblx0XHRcdGRnLmFkZERlcGVuZGVuY3koJ2EnLCdjJyk7XG5cblx0XHRcdC8vIENhbGwgdGhlIGdlbmVyYXRlIG1ldGhvZCBhbmQgY2hlY2sgdGhlIGdlbmVyYXRlZCBncmFwaFxuXHRcdFx0bGV0IGdlbmVyYXRlZCA9IERlcGVuZGVuY3lHcmFwaC5HZW5lcmF0ZShkZy50b1N0cmluZygpKTtcblx0XHRcdGNoYWkuZXhwZWN0KGdlbmVyYXRlZC5jb250YWlucygnYScpKS50by5lcXVhbCh0cnVlKTtcblx0XHRcdGNoYWkuZXhwZWN0KGdlbmVyYXRlZC5jb250YWlucygnYicpKS50by5lcXVhbCh0cnVlKTtcblx0XHRcdGNoYWkuZXhwZWN0KGdlbmVyYXRlZC5jb250YWlucygnYycpKS50by5lcXVhbCh0cnVlKTtcblx0XHRcdGNoYWkuZXhwZWN0KGdlbmVyYXRlZC5oYXNEZXBlbmRlbnRzKCdhJykpLnRvLmVxdWFsKHRydWUpO1xuXHRcdFx0Y2hhaS5leHBlY3QoQXJyYXkuZnJvbShkZy5nZXREZXBlbmRlbnRzKCdhJykpKS50by5pbmNsdWRlKCdiJyk7XG5cdFx0XHRjaGFpLmV4cGVjdChBcnJheS5mcm9tKGRnLmdldERlcGVuZGVudHMoJ2EnKSkpLnRvLmluY2x1ZGUoJ2MnKTtcblx0XHR9KTtcblx0fSk7XG59KTtcbiJdfQ==